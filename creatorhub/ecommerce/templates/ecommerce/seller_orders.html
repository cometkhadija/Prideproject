{% extends 'ecommerce/base.html' %}
{% block title %}Order Requests{% endblock %}

{% block content %}
<div class="container mt-5">

  <!-- Back Button -->
  <div class="mb-4">
    <a href="{% url 'product_showcase' %}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Back to Products
    </a>
  </div>

  <h2 class="mb-4 text-primary fw-semibold">Customer Orders</h2>

  {% if order_items %}
    <ul class="list-group">
      {% for item in order_items %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap
                   border rounded mb-3"
            style="background-color: #e9f0f8;"> <!-- Soft light blue background -->
          <div class="me-auto">
            <h5 class="mb-1 text-dark">{{ item.product.name }}</h5>
            <small class="text-secondary">Quantity: {{ item.quantity }}</small><br>
            <small class="text-secondary">Buyer: <strong>{{ item.order.buyer.username }}</strong></small><br>
            <small class="text-secondary">Phone: <a href="tel:{{ item.order.phone }}" class="text-decoration-none text-primary">{{ item.order.phone }}</a></small>
          </div>
          <div class="text-end ms-3">
            {% if item.seller_status == "Approved" %}
              <span class="badge bg-success py-2 px-3 fs-6">Approved</span>
            {% else %}
              <span class="badge bg-warning text-dark py-2 px-3 fs-6">Pending</span>
              <a href="{% url 'approve_order_item' item.id %}" class="btn btn-outline-primary btn-sm ms-3">
                Approve
              </a>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted fst-italic">No customer orders yet.</p>
  {% endif %}

</div>

<!-- Bootstrap Icons (only if not in base.html already) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

{% endblock %}
