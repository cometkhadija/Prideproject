{% extends 'ecommerce/base.html' %}
{% block title %}Product Showcase{% endblock %}
{% block content %}

<!-- Top Navbar -->

  <!-- Add New Product button (for sellers only) -->
  {% if user.is_authenticated and user.profile.role == 'seller' %}
    <div class="text-end mb-3">
      <a href="{% url 'add_product' %}?next={{ request.path }}" class="btn btn-success">
        Add New Product
      </a>
    </div>
  {% endif %}

  <!-- ✅ Product section -->
  <h2 class="mb-4">Our Products</h2>
  {% if products %}
    <div class="row">
      {% for product in products %}
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
            <div class="card-body">
              <h5 class="card-title">{{ product.name }}</h5>
              <p class="card-text">{{ product.price }}</p>

              {% if user.is_authenticated and user.profile.role == 'buyer' %}
                <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">View Details</a>
              {% elif user.is_authenticated and user.profile.role == 'seller' %}
                <a href="{% url 'edit_product' product.id %}" class="btn btn-primary">Edit</a>
                
                <a href="{% url 'delete_product' product.id %}?next={% url 'product_showcase' %}" class="btn btn-danger">Delete</a>

              {% else %}
                <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">View Details</a>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No products available.</p>
  {% endif %}
</div>

<!-- ✅ Lower Full-Width Navbar -->
<nav class="navbar navbar-dark w-100 mt-4" style="background-color: navy; padding: 1rem;">
  <div class="container-fluid d-flex flex-column align-items-start p-0 m-0 w-100">
    <h1 class="text-white mb-3" style="font-size: 2rem; text-align: left;">JU Creator’s Hub</h1>
    <p class="text-light mb-3 w-100" style="font-size: 1.2rem; text-align: left;">
    Born from the vibrant energy of Jahangirnagar University, it champions the small businesses run by students. With every click, it turns dreams into reality—enabling young creators to flourish, connect, and transform their ideas into enduring legacies.
    </p>
    <h5 class="mb-2" style="color: pink; font-weight: normal; text-align: left;">Categories</h5>
    <ul class="navbar-nav flex-column p-0 m-0 w-100">
      <li class="nav-item mb-0"><a class="nav-link text-white fw-bold" href="{% url 'product_list' 'food' %}">Food</a></li>
      <li class="nav-item mb-0"><a class="nav-link text-white fw-bold" href="{% url 'product_list' 'clothing' %}">Clothing</a></li>
      <li class="nav-item mb-0"><a class="nav-link text-white fw-bold" href="{% url 'product_list' 'jewellery' %}">Jewellery</a></li>
      <li class="nav-item mb-0"><a class="nav-link text-white fw-bold" href="{% url 'product_list' 'art' %}">Art</a></li>
    </ul>
  </div>
</nav>
{% endblock %}
