{% extends 'ecommerce/base.html' %}

{% block content %}

<!-- Product Section -->
<div class="container py-4">
  <div class="row align-items-start">
    <!-- Image Column -->
    <div class="col-lg-6 mb-4 mb-lg-0">
      <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid w-100" style="border: none; outline: none;" />
    </div>

    <!-- Details Column -->
    <div class="col-lg-6">
      <h1 class="mb-2">{{ product.name }}</h1>

      <!-- Shop Name -->
      <p class="text-muted mb-2">
        Sold by:
        <a href="{% url 'product_list' %}?shop={{ product.seller.profile.shop_name }}" class="fw-semibold text-decoration-none">
          {{ product.seller.profile.shop_name }}
        </a>
      </p>

      <div class="h5 mb-3">à§³ {{ product.price }}</div>
      <p class="mb-3">{{ product.description }}</p>
      <div class="text-muted mb-4">Product ID: {{ product.id }}</div>

      <!-- Action Buttons -->
      <div class="d-flex gap-2 mb-4">
        <form action="{% url 'add_to_cart' product.id %}" method="post" class="flex-fill">
          {% csrf_token %}
          <button type="submit" class="btn btn-dark w-100">Add to Cart</button>
        </form>
        <a href="{% url 'checkout' %}" class="btn btn-success flex-fill">Order Now</a>
      </div>

      <!-- Edit/Delete by Seller -->
      {% if user.is_authenticated and user == product.seller %}
        <div class="d-flex gap-2">
          <a href="{% url 'edit_product' product.id %}" class="btn btn-outline-primary flex-fill">Edit Product</a>
          <a href="{% url 'delete_product' product.id %}?next={% url 'product_showcase' %}" class="btn btn-outline-danger flex-fill">Delete Product</a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
